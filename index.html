<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIRALIZA - Monetiza tu TikTok y Redes Sociales</title>
    <link rel="icon" type="image/png" href="favicon.png">

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">

    <script src="https://static.dlocalgo.com/dlocalgo.min.js" async></script>

    <style>
        /* === 1. SISTEMA DE DISEÑO Y VARIABLES === */
        :root {
            --color-primary: #00f2ea;
            --color-secondary: #ff0050;
            --color-background: #010101;
            --color-surface: #121212;
            --color-surface-light: #1d1d1d;
            --color-text: #e4e4e4;
            --color-text-muted: #888888;
            --font-family-base: 'Poppins', sans-serif;
            --border-radius: 12px;
        }

        /* === 2. RESET Y ESTILOS GLOBALES === */
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; scroll-padding-top: 80px; }
        body { font-family: var(--font-family-base); background-color: var(--color-background); color: var(--color-text); line-height: 1.7; font-size: 16px; }
        .container { width: 90%; max-width: 1100px; margin-left: auto; margin-right: auto; }
        .section { padding: 80px 0; }
        .section-title { font-size: 2.8rem; text-align: center; margin-bottom: 1rem; }
        .subtitle { font-size: 1.2rem; color: var(--color-text-muted); max-width: 650px; margin: 0 auto 4rem auto; text-align: center; }
        .highlight-pink { color: var(--color-secondary); }
        .highlight-cyan { color: var(--color-primary); }
        
        /* === ESTILOS PARA LA NUEVA CALCULADORA DE SERVICIOS === */
        #social-services-calculator {
            border-top: 1px solid #222;
        }
        
        .calculator-layout {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
            align-items: flex-start;
        }

        .tabs-nav {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            background-color: var(--color-surface);
            padding: 0.5rem;
            border-radius: var(--border-radius);
            flex-wrap: wrap;
        }
        
        .tab-button {
            flex-grow: 1;
            background: transparent;
            border: none;
            color: var(--color-text-muted);
            padding: 0.8rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        
        .tab-button:hover {
            background-color: var(--color-surface-light);
            color: var(--color-text);
        }

        .tab-button.active {
            background: linear-gradient(45deg, var(--color-secondary), #c400ff);
            color: #fff;
            box-shadow: 0 4px 15px rgba(255, 0, 80, 0.2);
        }

        .tab-pane {
            display: none;
            animation: fadeInPage 0.5s;
        }

        .tab-pane.active {
            display: block;
        }

        .services-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }

        .service-card {
            background-color: var(--color-surface);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            border: 1px solid #222;
        }
        
        .service-card h4 {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            color: var(--color-primary);
        }

        .service-input-group {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .service-input-group input[type="number"] {
            width: 100px;
            padding: 0.5rem;
            background-color: var(--color-background);
            border: 1px solid #333;
            color: var(--color-text);
            border-radius: 8px;
            font-size: 1rem;
            text-align: center;
        }

        .service-input-group input[type="range"] {
            flex-grow: 1;
        }

        .service-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .service-price {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .add-to-quote-btn {
            background-color: var(--color-primary);
            color: var(--color-background);
            font-weight: bold;
            border: none;
            padding: 0.6rem 1.2rem;
            border-radius: 8px;
            cursor: pointer;
        }

        .quote-summary {
            background-color: var(--color-surface);
            padding: 2rem;
            border-radius: var(--border-radius);
            border: 1px solid #222;
            position: sticky;
            top: 100px; /* Se pega debajo del header */
        }
        
        .quote-summary h3 {
            text-align: center;
            margin-bottom: 1.5rem;
            color: var(--color-primary);
        }

        #quote-items li {
            list-style: none;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #222;
            font-size: 0.9rem;
        }

        #quote-items .remove-quote-item {
            background: none;
            border: none;
            color: var(--color-secondary);
            cursor: pointer;
            font-size: 1.1rem;
            margin-left: 10px;
        }
        
        .quote-total {
            text-align: right;
            font-size: 1.8rem;
            font-weight: 700;
            margin-top: 1.5rem;
        }
        
        .quote-total-label {
            display: block;
            font-size: 1rem;
            color: var(--color-text-muted);
        }
        
        #whatsapp-quote-btn {
            width: 100%;
            margin-top: 1.5rem;
            background: #25D366;
            color: #fff;
        }
        
        .button { display: inline-block; font-weight: 600; text-align: center; cursor: pointer; border: 2px solid transparent; padding: 0.8rem 1.8rem; font-size: 1rem; border-radius: 50px; text-decoration: none; transition: all 0.3s ease; }
        .button-primary { background: linear-gradient(45deg, var(--color-secondary), #ff4500); color: #fff; box-shadow: 0 4px 15px rgba(255, 0, 80, 0.3); }
        .button-primary:hover { transform: translateY(-3px); box-shadow: 0 7px 20px rgba(255, 0, 80, 0.5); }
        .button.pulse { animation: pulseAnimation 1.5s infinite; }
        @keyframes pulseAnimation { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        .button-plan { background: linear-gradient(45deg, var(--color-primary), #00c1b8); color: var(--color-background); width: 100%; }
        .plan-card.popular .button-plan { background: linear-gradient(45deg, var(--color-secondary), #c400ff); color: #fff; }
        .button-full { width: 100%; padding-top: 1rem; padding-bottom: 1rem; font-size: 1.1rem; }
        .button-secondary { background-color: var(--color-surface-light); color: var(--color-text); border-color: #444; }
        .button-secondary:hover { background-color: #333; border-color: #555; }
        .button-loading { position: relative; color: transparent !important; cursor: wait !important; }
        .button-loading::after { content: ''; position: absolute; width: 20px; height: 20px; top: 0; left: 0; right: 0; bottom: 0; margin: auto; border: 4px solid transparent; border-top-color: #ffffff; border-radius: 50%; animation: button-rotation 1s ease infinite; }
        @keyframes button-rotation { 0% { transform: rotate(0turn); } 100% { transform: rotate(1turn); } }
        .header { background-color: rgba(1, 1, 1, 0.7); backdrop-filter: blur(12px); padding: 1rem 0; border-bottom: 1px solid #222; position: sticky; top: 0; z-index: 1000; }
        .header-container { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1.8rem; font-weight: 800; color: #fff; text-decoration: none; background: linear-gradient(45deg, var(--color-secondary), var(--color-primary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; color: transparent; }
        .main-nav ul { display: flex; list-style: none; gap: 2rem; }
        .main-nav a { color: var(--color-text); text-decoration: none; font-weight: 500; transition: color 0.3s; }
        .main-nav a:hover { color: var(--color-primary); }
        .hero-section { padding: 100px 0; min-height: 80vh; display: flex; align-items: center; justify-content: center; text-align: center; background: linear-gradient(rgba(1, 1, 1, 0.7), rgba(1, 1, 1, 0.8)), url('https://images.pexels.com/photos/7175561/pexels-photo-7175561.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1') no-repeat center center/cover; }
        .hero-title { font-size: 3.5rem; font-weight: 800; line-height: 1.2; margin-bottom: 1.5rem; }
        .benefits-grid, .how-it-works-grid, .contact-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; }
        .benefit-card, .how-it-works-step, .contact-card { background-color: var(--color-surface); padding: 2.5rem 2rem; border-radius: var(--border-radius); text-align: center; border: 1px solid #222; transition: transform 0.2s ease-in-out; }
        .benefit-card:hover, .how-it-works-step:hover, .contact-card:hover { transform: translateY(-5px); }
        .benefit-card .icon, .how-it-works-step .icon, .contact-card .icon { font-size: 3rem; margin-bottom: 1.5rem; color: var(--color-primary); }
        .benefit-card h4, .how-it-works-step h4, .contact-card h4 { font-size: 1.3rem; margin-bottom: 1rem; }
        .benefit-card p, .how-it-works-step p, .contact-card p { color: var(--color-text-muted); }
        .contact-card a { color: var(--color-text); text-decoration: none; transition: color 0.3s; word-break: break-all;}
        .contact-card a:hover { color: var(--color-primary); }
        .live-features-grid { display: grid; grid-template-columns: 1fr 1.2fr; gap: 3rem; align-items: center; }
        .live-features-image img { width: 100%; height: auto; border-radius: var(--border-radius); }
        .plans-container { display: flex; justify-content: center; align-items: stretch; gap: 2rem; flex-wrap: wrap; }
        .plan-card { background-color: var(--color-surface); padding: 2.5rem; border-radius: var(--border-radius); width: 100%; max-width: 380px; border: 2px solid #222; display: flex; flex-direction: column; text-align: center; transition: all 0.3s ease; }
        .plan-card.popular { border-color: var(--color-secondary); transform: scale(1.03); }
        .popular-badge { background: linear-gradient(45deg, var(--color-secondary), #c400ff); color: #fff; padding: 0.5rem 1rem; border-radius: 50px; font-size: 0.9rem; font-weight: 700; display: inline-block; margin-bottom: 1.5rem; }
        .plan-card .price { font-size: 3.5rem; font-weight: 800; margin: 1rem 0; color: var(--color-primary); }
        .plan-card .price-note {font-size: 0.9rem; color: var(--color-text-muted); margin-top: -1rem; margin-bottom: 1rem;}
        .plan-card .plan-description { color: var(--color-text-muted); flex-grow: 1; margin-bottom: 1.5rem;}
        .benefits-list { text-align: left; margin: 1.5rem 0; padding-left: 1rem; list-style: none; }
        .benefits-list li { margin-bottom: 0.8rem; display: flex; align-items: flex-start; gap: 10px; }
        .benefits-list i { color: var(--color-primary); margin-top: 4px; }
        .plan-card.popular .benefits-list i { color: var(--color-secondary); }
        .plan-card .button-plan { margin-top: auto; }
        .faq-container { max-width: 800px; margin: 0 auto; }
        .faq-item { background-color: var(--color-surface); margin-bottom: 10px; border: 1px solid #222; border-radius: 8px; }
        .faq-question { padding: 20px; font-weight: 600; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
        .faq-question::after { content: '\f078'; font-family: 'Font Awesome 6 Free'; font-weight: 900; transition: transform 0.3s; }
        .faq-answer { padding: 0 20px 20px; color: var(--color-text-muted); max-height: 0; overflow: hidden; transition: max-height 0.5s ease, padding 0.5s ease; }
        .faq-item[open] .faq-question::after { transform: rotate(180deg); }
        .faq-item[open] .faq-answer { max-height: 300px; }
        .footer { background-color: #000; text-align: center; padding: 2rem 0; color: var(--color-text-muted); font-size: 0.9rem; }
        .page-container { min-height: 100vh; padding: 40px 20px; display: flex; flex-direction: column; align-items: center; justify-content: center; animation: fadeInPage 0.5s ease; }
        @keyframes fadeInPage { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .form-wrapper, .result-wrapper { background-color: var(--color-surface); padding: 2.5rem; border-radius: var(--border-radius); border: 1px solid #222; width: 100%; max-width: 600px; }
        .back-to-main { background: none; border: none; color: var(--color-text-muted); cursor: pointer; margin-bottom: 2rem; font-weight: 500; transition: color 0.3s; }
        .back-to-main:hover { color: var(--color-primary); }
        .form-group { margin-bottom: 1.5rem; }
        .form-group label { display: block; color: var(--color-text); margin-bottom: 0.5rem; font-weight: 500; }
        .form-group input, .form-group select { width: 100%; padding: 0.8rem 1rem; background-color: var(--color-background); border: 1px solid #333; border-radius: 8px; color: var(--color-text); font-size: 1rem; box-sizing: border-box; font-family: var(--font-family-base); }
        .form-group input[type="file"] { padding: 0.5rem; }
        .profile-pic-preview { max-width: 80px; height: 80px; border-radius: 50%; margin-top: 1rem; border: 2px solid var(--color-primary); object-fit: cover; }
        .input-group { display: flex; gap: 0.5rem; }
        .input-group input { flex-grow: 1; }
        .input-group button { padding: 0 1.2rem; border-radius: 8px; border: none; background-color: var(--color-primary); color: var(--color-background); font-weight: bold; cursor: pointer; }
        #username-status { font-size: 0.9rem; margin-top: 0.5rem; min-height: 1.4em; font-weight: 600; }
        #username-status.success { color: #28a745; }
        #username-status.error { color: #dc3545; }
        #username-status.loading { color: #ffc107; }
        .form-notes { margin-top: 2.5rem; padding: 1.5rem; background-color: var(--color-surface-light); border-radius: 8px; border-left: 3px solid var(--color-primary); }
        .form-notes p { font-size: 0.9rem; color: var(--color-text-muted); margin: 0; }
        .form-notes ul { list-style-position: inside; padding-left: 0; margin-top: 0.5rem; font-size: 0.9rem; color: var(--color-text-muted); }
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.85); backdrop-filter: blur(5px); display: flex; align-items: center; justify-content: center; z-index: 2000; animation: fadeInPage 0.3s; }
        .modal-content { background-color: var(--color-surface-light); padding: 2rem; border-radius: var(--border-radius); box-shadow: 0 5px 25px rgba(0,0,0,0.5); width: 90%; max-width: 500px; border-top: 3px solid var(--color-primary); }
        .order-summary p { margin-bottom: 0.5rem; }
        .order-summary p strong { color: var(--color-primary); }
        .modal-buttons { margin-top: 2rem; display: flex; flex-direction: column; align-items: stretch; gap: 1rem; }
        #dlocal-payment-container { min-height: 50px; display: flex; justify-content: center; }
        .result-wrapper { text-align: center; }
        .result-icon { font-size: 4rem; line-height: 1; margin-bottom: 1.5rem; }
        .success-icon { color: #28a745; }
        .canceled-icon { color: #ffc107; }
        .next-steps { text-align: left; background-color: var(--color-surface-light); padding: 1.5rem; margin: 2rem 0; border-radius: 8px; }
        .next-steps h4 { text-align: left; color: #fff; }
        .next-steps ol { padding-left: 1.5rem; color: var(--color-text-muted); }
        
        @media (max-width: 992px) {
            .calculator-layout {
                grid-template-columns: 1fr;
            }
            .quote-summary {
                position: static;
                margin-top: 2rem;
            }
        }
        @media (max-width: 768px) { 
            .section { padding: 60px 0; } 
            .section-title, .hero-title { font-size: 2.2rem; } 
            .plans-container, .live-features-grid, .contact-grid { grid-template-columns: 1fr; } 
            .plan-card { max-width: 420px; } 
            .modal-buttons { flex-direction: column-reverse; } 
            .modal-buttons .button { width: 100%; } 
            .header-container { flex-direction: column; gap: 15px; }
        }
        .guarantee-box {
            margin-top: 2.5rem;
            padding: 1.5rem;
            background-color: rgba(0, 242, 234, 0.05);
            border-radius: var(--border-radius);
            border: 1px solid rgba(0, 242, 234, 0.2);
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }
        .guarantee-icon {
            font-size: 2.5rem;
            color: var(--color-primary);
        }
        .guarantee-content h4 {
            color: #fff;
            margin-bottom: 0.5rem;
        }
        .guarantee-content p {
            color: var(--color-text-muted);
            font-size: 0.9rem;
            line-height: 1.6;
        }
        .guarantee-content p strong {
            color: var(--color-primary);
            font-weight: 600;
        }
        .back-to-main {
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1.5rem;
            border-radius: 50px;
            background-color: var(--color-surface-light);
            border: 1px solid #333;
            color: var(--color-text-muted);
            font-size: 1rem;
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            margin-bottom: 2rem;
            transition: all 0.3s ease;
        }
        .back-to-main:hover {
            background-color: #333;
            border-color: #444;
            color: var(--color-primary);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        .back-to-main i {
            font-size: 1.1rem;
        }
    </style>
</head>
<body>

    <div id="main-content">
        <header class="header">
            <div class="container header-container">
                <a href="#main-content" class="logo nav-link-home">VIRALIZA</a>
                <nav class="main-nav">
                    <ul>
                        <li><a href="#plans" class="nav-link">Cuentas TikTok</a></li>
                        <li><a href="#social-services-calculator" class="nav-link">Otros Servicios</a></li>
                        <li><a href="#faq" class="nav-link">Preguntas</a></li>
                        <li><a href="#contact" class="nav-link">Contacto</a></li>
                    </ul>
                </nav>
            </div>
        </header>

        <main>
            <section id="hero" class="hero-section">
                <div class="container">
                    <h1 class="hero-title">Tu Plataforma de Crecimiento Digital</h1>
                    <p class="subtitle">Obtén cuentas de TikTok listas para monetizar o impulsa tus redes sociales con nuestros servicios de crecimiento.</p>
                    <a href="#plans" class="button button-primary pulse nav-link">Ver Servicios <i class="fas fa-chevron-down"></i></a>
                </div>
            </section>
            <section id="ventajas-cuentas" class="section">
                <div class="container">
                    <h2 class="section-title">Ventajas <span class="highlight-cyan">Exclusivas</span> de una Cuenta Europea</h2>
                    <p class="subtitle">Descubre por qué nuestras cuentas (Región Francia) te ofrecen un camino más seguro y rentable hacia la monetización, superando las limitaciones de las cuentas estándar de Latinoamérica.</p>
                    <div class="benefits-grid">
                        <div class="benefit-card">
                            <div class="icon"><i class="fas fa-shield-alt"></i></div>
                            <h4>LIVES Blindados y Sin Restricciones</h4>
                            <p>Transmite con total libertad. Nuestra principal ventaja es la alta tolerancia a dinámicas como juegos, sorteos y batallas, eliminando el riesgo constante de interrupciones o baneos.</p>
                        </div>
                        <div class="benefit-card">
                            <div class="icon"><i class="fas fa-euro-sign"></i></div>
                            <h4>Monetización Superior</h4>
                            <p>Accede a un sistema de pagos por vistas y regalos en LIVES más robusto y rentable. Las cuentas europeas te permiten maximizar tus ganancias por todo tu contenido.</p>
                        </div>
                        <div class="benefit-card">
                            <div class="icon"><i class="fas fa-rocket"></i></div>
                            <h4>Crecimiento y Credibilidad</h4>
                            <p>Una cuenta lista para monetizar proyecta autoridad. Esto te ayuda a atraer seguidores reales más rápido y a establecer tu credibilidad en la plataforma desde el primer día.</p>
                        </div>
                        <div class="benefit-card">
                            <div class="icon"><i class="fas fa-star"></i></div>
                            <h4>Acceso a Funciones Beta</h4>
                            <p>Sé el primero en probar y utilizar las nuevas herramientas y funciones que TikTok lanza. Las regiones europeas a menudo reciben actualizaciones y novedades antes que el resto del mundo.</p>
                        </div>
                        <div class="benefit-card">
                            <div class="icon"><i class="fas fa-music"></i></div>
                            <h4>Biblioteca Musical sin Límites</h4>
                            <p>Utiliza la música que está en tendencia sin restricciones. Las cuentas europeas tienen acceso a una librería de sonidos comerciales mucho más grande, dándote más libertad creativa.</p>
                        </div>
                        <div class="benefit-card">
                            <div class="icon"><i class="fas fa-chart-line"></i></div>
                            <h4>Algoritmo Favorable</h4>
                            <p>Empieza de nuevo con el algoritmo. Una cuenta de una nueva región puede ayudarte a salir de un estancamiento de visualizaciones y te da la posibilidad de alcanzar nuevas audiencias.</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="plans" class="section section-dark">
                <div class="container">
                    <h2 class="section-title">Cuentas TikTok <span class="highlight-cyan">Listas para Monetizar</span></h2>
                    <p class="subtitle">Comienza a ganar dinero con tus videos y LIVES desde el primer día con una cuenta de región estratégica.</p>
                    <div class="plans-container">
                        
                        <div class="plan-card" data-plan="basico">
                            <h3>PLAN <span class="highlight-pink">BÁSICO</span></h3>
                            <p class="price">S/ 20</p>
                            <p class="price-note">Precio base para Perú</p>
                            <p class="plan-description">La forma más rápida y económica de activar las herramientas de monetización en tu perfil.</p>
                            <ul class="benefits-list">
                                <li><i class="fas fa-check"></i><div>Cuenta de Región Europea (Francia).</div></li>
                                <li><i class="fas fa-check"></i><div>Acceso al <strong>Programa de Creatividad</strong>.</div></li>
                                <li><i class="fas fa-check"></i><div>Potencial para monetizar tus vistas.</div></li>
                                <li><i class="fas fa-check"></i><div>Acceso a TikTok Shop y Creator Marketplace.</div></li>
                                <li><i class="fas fa-check"></i><div>Estabilidad mejorada para LIVES.</div></li>
                            </ul>
                            <button class="button button-plan select-plan-button">Configurar y Pagar</button>
                        </div>

                        <div class="plan-card popular" data-plan="pro">
                            <div class="popular-badge"><i class="fas fa-crown"></i> Recomendado</div>
                            <h3>PLAN <span class="highlight-cyan">LIVE PRO</span></h3>
                            <p class="price">S/ 90</p>
                            <p class="price-note">Precio base para Perú</p>
                            <p class="plan-description">El paquete definitivo para dominar TikTok y monetizar desde el día uno, con todo configurado y una base de seguidores.</p>
                            <ul class="benefits-list">
                                <li><i class="fas fa-check"></i><div><strong>Todo lo del Plan Básico, y además:</strong></div></li>
                                <li><i class="fas fa-check"></i><div>Programa Beta de Creatividad <strong>¡LISTO USAR!</strong></div></li>
                                <li><i class="fas fa-check"></i><div>Función de <strong>transmisión EN VIVO</strong> activada.</div></li>
                                <li><i class="fas fa-check"></i><div>Acceso a TikTok Shop y Creator Marketplace.</div></li>
                                <li><i class="fas fa-check"></i><div><strong>TikTok Studio</strong> ¡LISTO USAR!</div></li>
                                <li><i class="fas fa-check"></i><div><strong>1,000 seguidores</strong> de arranque.</div></li>
                                <li><i class="fas fa-check"></i><div><strong>100 Me gustas</strong>primera plublicacion TikTok.</div></li>
                                <li><i class="fas fa-check"></i><div><strong>Soporte, asesorías y descuentos</strong> 24/7.</div></li>
                            </ul>
                            <button class="button button-plan select-plan-button">Configurar y Pagar</button>
                        </div>

                    </div>
                </div>
            </section>
            
            <section id="social-services-calculator" class="section">
                <div class="container">
                    <h2 class="section-title">Impulsa <span class="highlight-pink">Todas</span> tus Redes Sociales</h2>
                    <p class="subtitle">Selecciona una plataforma, elige el servicio, ajusta la cantidad y obtén una cotización al instante.</p>
                    <div class="calculator-layout">
                        <div class="services-container">
                            <div class="tabs-nav"></div>
                            <div class="tabs-content"></div>
                        </div>
                        <div class="quote-summary-container">
                            <div id="quote-summary" class="quote-summary">
                                <h3><i class="fas fa-shopping-cart"></i> Tu Cotización</h3>
                                <ul id="quote-items">
                                    <li class="empty-quote">Añade servicios para cotizar.</li>
                                </ul>
                                <div id="quote-total" class="quote-total">
                                    <span class="quote-total-label">Total</span>
                                    S/ 0.00
                                </div>
                                <a id="whatsapp-quote-btn" class="button" href="#" target="_blank" disabled>
                                    <i class="fab fa-whatsapp"></i> Enviar a WhatsApp
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="faq" class="section section-dark">
                <div class="container">
                    <h2 class="section-title">Preguntas Frecuentes</h2>
                    <div class="faq-container">
                        <details class="faq-item">
                            <summary class="faq-question">¿Es seguro comprar una cuenta o servicios?</summary>
                            <div class="faq-answer"><p>Totalmente. Para las cuentas, te damos el control total y exclusivo. Para los servicios de crecimiento, utilizamos métodos seguros que no ponen en riesgo tu perfil.</p></div>
                        </details>
                        <details class="faq-item">
                            <summary class="faq-question">¿Cómo retiro las ganancias de TikTok?</summary>
                            <div class="faq-answer"><p>Podrás vincular tu propia cuenta de PayPal para retirar todas las ganancias. El proceso es directo y gestionado completamente por ti dentro de la aplicación.</p></div>
                        </details>
                        <details class="faq-item">
                            <summary class="faq-question">¿En cuánto tiempo entregan los servicios?</summary>
                            <div class="faq-answer"><p>Las cuentas se entregan en 24-48 horas. Los servicios de crecimiento (seguidores, likes, etc.) suelen empezar a reflejarse en pocas horas tras la confirmación del pago.</p></div>
                        </details>
                    </div>
                </div>
            </section>

            <section id="contact" class="section">
                <div class="container">
                    <h2 class="section-title">¿Prefieres un Trato Directo? <span class="highlight-cyan">Contáctanos</span></h2>
                    <p class="subtitle">Estamos disponibles para resolver tus dudas o procesar tu pedido personalmente. Elige la forma que prefieras.</p>
                    <div class="contact-grid">
                        <div class="contact-card">
                            <div class="icon"><i class="fab fa-whatsapp"></i></div>
                            <h4>Escríbenos a WhatsApp</h4>
                            <p><a href="https://wa.me/51923904918?text=Hola,%20quisiera%20más%20información%20sobre%20los%20servicios%20de%20VIRALIZA." target="_blank">923 904 918</a></p>
                        </div>
                        <div class="contact-card">
                            <div class="icon"><i class="fas fa-envelope"></i></div>
                            <h4>Envíanos un Correo</h4>
                            <p><a href="mailto:richar.romero.romero@gmail.com">richar.romero.romero@gmail.com</a></p>
                        </div>
                        <div class="contact-card">
                            <div class="icon"><i class="fas fa-map-marker-alt"></i></div>
                            <h4>Visita Nuestras Oficinas</h4>
                            <p><a href="https://www.google.com/maps/search/?api=1&query=Av.+Angélica+Gamarra+1332,+Los+Olivos,+Lima" target="_blank">Av. Angélica Gamarra 1332, Los Olivos, Lima, Perú</a></p>
                        </div>
                    </div>
                </div>
            </section>

        </main>
        <footer class="footer">
            <div class="container"><p>© 2025 VIRALIZA. Todos los derechos reservados.</p></div>
        </footer>
    </div>

    <div id="form-page" class="page-container" style="display: none;">
        <div class="form-wrapper">
            <button class="back-to-main"><i class="fas fa-arrow-left"></i> Volver al Inicio</button>
            <h2 id="form-title" class="section-title" style="text-align: left; font-size: 2.2rem;"></h2>
            <p class="subtitle" style="text-align: left; margin: 0 0 2rem 0;">Completa tus datos para la nueva cuenta. Esta información es confidencial y solo se usa para la creación de tu pedido.</p>
            
            <form id="pre-payment-form" action="https://formspree.io/f/mkgbodzk" method="POST">
                <div class="form-group"><label for="customer-email">Tu Correo Electrónico:</label><input type="email" id="customer-email" name="email" required placeholder="Para enviarte los accesos y confirmaciones"></div>
                <div class="form-group"><label for="customer-phone">Tu Teléfono (WhatsApp):</label><input type="tel" id="customer-phone" name="phone" required placeholder="Para contacto directo si es necesario"></div>
                
                <div class="form-group">
                    <label for="customer-country">País de Residencia (para el pago):</label>
                    <select id="customer-country" name="country" required>
                        <option value="">-- Selecciona tu país --</option>
                        <option value="PE">Perú</option>
                        <option value="CL">Chile</option>
                        <option value="BO">Bolivia</option>
                        <option value="AR">Argentina</option>
                        <option value="CO">Colombia</option>
                    </select>
                </div>

                <div class="form-group"><label for="tiktok-username">Username deseado para TikTok:</label><div class="input-group"><input type="text" id="tiktok-username" name="username" required pattern="^@[a-zA-Z0-9_.]+$" placeholder="@tunombrecreativo"><button type="button" id="verify-username-btn">Verificar</button></div><p id="username-status"></p></div>
                <div class="form-group"><label for="profile-pic">Foto de Perfil deseada (opcional):</label><input type="file" id="profile-pic" name="profile_pic_file" accept="image/*"><img id="profile-pic-preview" class="profile-pic-preview" src="#" alt="Vista previa" style="display:none;"/></div>
                <input type="hidden" name="profile_pic_url" id="profile-pic-url">
                <div class="form-group" id="last-post-url-group" style="display: none;"><label for="last-post-url">URL de tu último video (para seguidores extra):</label><input type="url" id="last-post-url" name="last_post_url" placeholder="https://www.tiktok.com/@user/video/123..."></div>
                <input type="hidden" name="plan_elegido" id="hidden-plan-input">
                <button type="submit" id="form-submit-button" class="button button-primary button-full"></button>
            </form>

            <div class="guarantee-box">
                <div class="guarantee-icon"><i class="fas fa-stopwatch-20"></i></div>
                <div class="guarantee-content">
                    <h4>Entrega Express y Soporte Personalizado</h4>
                    <p>
                        Una vez realizado tu pago, nuestro equipo se pondrá en contacto contigo por <strong>WhatsApp y correo electrónico en menos de 10 minutos</strong> para la entrega de tu cuenta. Además, agendaremos tu sesión de <strong>soporte configurable en vivo por Google Meet</strong>.
                    </p>
                </div>
            </div>

        </div>
    </div>

    <div id="confirmation-modal" class="modal-overlay" style="display: none;">
         <div class="modal-content">
            <h3>Confirmar Detalles del Pedido</h3><p style="color: var(--color-text-muted);">Revisa que toda la información sea correcta antes de pagar.</p><br>
            <div class="order-summary">
                <p><strong>Plan:</strong> <span id="modal-summary-plan"></span></p>
                <p><strong>Precio:</strong> <span id="modal-summary-price"></span></p>
                <p><strong>País:</strong> <span id="modal-summary-country"></span></p>
                <p><strong>Email:</strong> <span id="modal-summary-email"></span></p>
                <p><strong>Teléfono:</strong> <span id="modal-summary-phone"></span></p>
                <p><strong>Username:</strong> <span id="modal-summary-username"></span></p>
                <div id="modal-summary-post-url-container" style="display: none;"><p><strong>URL Video:</strong> <span id="modal-summary-post-url"></span></p></div>
            </div>
            <div class="modal-buttons">
                <div id="dlocal-payment-container"></div>
                <button id="edit-details-btn" class="button button-secondary">Corregir Datos</button>
            </div>
         </div>
    </div>

    <div id="success-page" class="page-container" style="display: none;">
        <div class="result-wrapper">
            <div class="result-icon success-icon"><i class="fas fa-check-circle"></i></div>
            <h2 class="section-title">¡Pedido Recibido!</h2>
            <p class="subtitle">Gracias por tu compra. Ya estamos procesando tu pedido. Revisa tu correo electrónico (y la carpeta de spam) para la confirmación.</p>
            <div class="next-steps"><h4>¿Qué sigue ahora?</h4><ol><li>Recibirás un correo de confirmación de nuestro equipo.</li><li>Comenzaremos a crear y configurar tu cuenta.</li><li>Te contactaremos por WhatsApp o correo para la entrega final.</li></ol></div>
            <button class="button button-primary back-to-home-btn">Volver al Inicio</button>
        </div>
    </div>
    <div id="canceled-page" class="page-container" style="display: none;">
        <div class="result-wrapper">
            <div class="result-icon canceled-icon"><i class="fas fa-exclamation-triangle"></i></div>
            <h2 class="section-title">Pago Cancelado</h2>
            <p class="subtitle">El proceso de pago no se completó o fue cancelado. No se ha realizado ningún cargo en tu cuenta. Puedes volver a intentarlo.</p>
            <button class="button button-secondary back-to-home-btn">Volver a Intentarlo</button>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // --- CONFIGURACIÓN DE SERVICIOS Y CONTACTO ---
        const WHATSAPP_NUMBER = '51923904918';
        const CLOUDINARY_CLOUD_NAME = 'daassyisd'; 
        const CLOUDINARY_UPLOAD_PRESET = 'Presenten_react';
        
        // --- NUEVA CONFIGURACIÓN DE PAGOS POR PAÍS ---
        const DLOCAL_GO_KEY = "ROnTDifVRPciDQVYRCMJXUzdxxnFrfos";
        const paymentDetails = {
            'basico': {
                'PE': { country: 'PE', currency: 'PEN', amount: '20.00', text: 'Pagar Plan Básico (S/ 20.00)' },
                'CL': { country: 'CL', currency: 'CLP', amount: '5056.88', text: 'Pagar Plan Básico (CLP 5,057)' },
                'BO': { country: 'BO', currency: 'BOB', amount: '100.06', text: 'Pagar Plan Básico (BOB 100)' },
                'AR': { country: 'AR', currency: 'ARS', amount: '6367.40', text: 'Pagar Plan Básico (ARS 6,367)' },
                'CO': { country: 'CO', currency: 'COP', amount: '22119.80', text: 'Pagar Plan Básico (COP 22,120)' }
            },
            'pro': {
                'PE': { country: 'PE', currency: 'PEN', amount: '90.00', text: 'Pagar Plan Pro (S/ 90.00)' },
                'CL': { country: 'CL', currency: 'CLP', amount: '25284.39', text: 'Pagar Plan Pro (CLP 25,284)' },
                'BO': { country: 'BO', currency: 'BOB', amount: '500.31', text: 'Pagar Plan Pro (BOB 500)' },
                'AR': { country: 'AR', currency: 'ARS', amount: '31837.03', text: 'Pagar Plan Pro (ARS 31,837)' },
                'CO': { country: 'CO', currency: 'COP', amount: '110599.02', text: 'Pagar Plan Pro (COP 110,600)' }
            }
        };
        const countryNames = { 'PE': 'Perú', 'CL': 'Chile', 'BO': 'Bolivia', 'AR': 'Argentina', 'CO': 'Colombia' };

        const servicesData = {
            instagram: { name: 'Instagram', icon: 'fab fa-instagram', services: [ { id: 'ig-followers', name: 'Seguidores Reales', pricePerUnit: 0.018, min: 500, max: 10000, step: 100, default: 1000 }, { id: 'ig-likes', name: 'Me Gusta Reales', pricePerUnit: 0.008, min: 100, max: 5000, step: 50, default: 500 } ] },
            facebook: { name: 'Facebook', icon: 'fab fa-facebook-f', services: [ { id: 'fb-prof-followers', name: 'Seguidores (Perfil)', pricePerUnit: 0.012, min: 500, max: 10000, step: 100, default: 1000 }, { id: 'fb-page-followers', name: 'Seguidores (Página)', pricePerUnit: 0.013, min: 500, max: 10000, step: 100, default: 1000 }, ] },
            tiktok: { name: 'TikTok', icon: 'fab fa-tiktok', services: [ { id: 'tt-followers', name: 'Seguidores Reales', pricePerUnit: 0.017, min: 500, max: 10000, step: 100, default: 1000 }, { id: 'tt-likes', name: 'Me Gusta Reales', pricePerUnit: 0.008, min: 500, max: 5000, step: 100, default: 500 }, ] },
            twitch: { name: 'Twitch', icon: 'fab fa-twitch', services: [ { id: 'tw-followers', name: 'Seguidores Reales', pricePerUnit: 0.035, min: 500, max: 5000, step: 50, default: 1000 }, { id: 'tw-viewers', name: 'Espectadores Reales', pricePerUnit: 0.017, min: 100, max: 2000, step: 10, default: 500 }, ] },
            youtube: { name: 'YouTube', icon: 'fab fa-youtube', services: [ { id: 'yt-subs', name: 'Suscriptores Reales', pricePerUnit: 0.022, min: 100, max: 5000, step: 50, default: 500 }, { id: 'yt-likes', name: 'Me Gusta Reales', pricePerUnit: 0.014, min: 100, max: 5000, step: 50, default: 250 }, ] },
            telegram: { name: 'Telegram', icon: 'fab fa-telegram-plane', services: [ { id: 'tg-members', name: 'Miembros Reales', pricePerUnit: 0.01, min: 1000, max: 20000, step: 500, default: 1000 }, ] },
        };
        
        let currentQuote = {};

        function initCalculator() {
            const tabsNav = document.querySelector('.tabs-nav');
            const tabsContent = document.querySelector('.tabs-content');
            if (!tabsNav || !tabsContent) return;
            tabsNav.innerHTML = '';
            tabsContent.innerHTML = '';
            Object.keys(servicesData).forEach((platformKey, index) => {
                const platform = servicesData[platformKey];
                const tabButton = document.createElement('button');
                tabButton.className = `tab-button ${index === 0 ? 'active' : ''}`;
                tabButton.dataset.platform = platformKey;
                tabButton.innerHTML = `<i class="${platform.icon}"></i> ${platform.name}`;
                tabsNav.appendChild(tabButton);
                const pane = document.createElement('div');
                pane.id = `tab-${platformKey}`;
                pane.className = `tab-pane ${index === 0 ? 'active' : ''}`;
                const servicesGrid = document.createElement('div');
                servicesGrid.className = 'services-grid';
                platform.services.forEach(service => {
                    const card = document.createElement('div');
                    card.className = 'service-card';
                    card.innerHTML = `<h4>${service.name}</h4><div class="service-input-group"><input type="number" id="input-${service.id}" value="${service.default}" min="${service.min}" max="${service.max}" step="${service.step}"><input type="range" id="slider-${service.id}" value="${service.default}" min="${service.min}" max="${service.max}" step="${service.step}"></div><div class="service-footer"><span class="service-price" id="price-${service.id}">S/ 0.00</span><button class="add-to-quote-btn" data-service-id="${service.id}">Añadir</button></div>`;
                    servicesGrid.appendChild(card);
                });
                pane.appendChild(servicesGrid);
                tabsContent.appendChild(pane);
            });
            addCalculatorEventListeners();
            updateAllPrices();
        }
        function addCalculatorEventListeners() {
            document.querySelectorAll('.tab-button').forEach(b => b.addEventListener('click', () => switchTab(b.dataset.platform)));
            document.querySelectorAll('.service-input-group input').forEach(i => i.addEventListener('input', handleInputChange));
            document.querySelectorAll('.add-to-quote-btn').forEach(b => b.addEventListener('click', () => {
                const id = b.dataset.serviceId;
                addServiceToQuote(id, parseInt(document.getElementById(`input-${id}`).value));
            }));
            document.getElementById('whatsapp-quote-btn').addEventListener('click', sendQuoteToWhatsApp);
        }
        function handleInputChange(e) {
            const id = e.target.id;
            const value = e.target.value;
            const type = id.split('-')[0];
            const serviceId = id.substring(type.length + 1);
            document.getElementById(`input-${serviceId}`).value = value;
            document.getElementById(`slider-${serviceId}`).value = value;
            updatePrice(serviceId);
        }
        function getServiceById(serviceId) {
            for (const key in servicesData) {
                const found = servicesData[key].services.find(s => s.id === serviceId);
                if (found) return found;
            }
            return null;
        }
        function updatePrice(serviceId) {
            const service = getServiceById(serviceId);
            if (!service) return;
            const price = document.getElementById(`input-${serviceId}`).value * service.pricePerUnit;
            document.getElementById(`price-${serviceId}`).textContent = `S/ ${price.toFixed(2)}`;
        }
        function updateAllPrices() {
            Object.values(servicesData).forEach(p => p.services.forEach(s => updatePrice(s.id)));
        }
        function switchTab(platformKey) {
            document.querySelectorAll('.tab-button, .tab-pane').forEach(el => el.classList.remove('active'));
            document.querySelector(`.tab-button[data-platform="${platformKey}"]`).classList.add('active');
            document.getElementById(`tab-${platformKey}`).classList.add('active');
        }
        function addServiceToQuote(serviceId, quantity) {
            const service = getServiceById(serviceId);
            if (!service || quantity < service.min) {
                alert(`La cantidad mínima para ${service.name} es ${service.min}.`);
                return;
            }
            currentQuote[serviceId] = { name: service.name, quantity: quantity, price: quantity * service.pricePerUnit };
            updateQuoteSummary();
        }
        function removeServiceFromQuote(serviceId) {
            delete currentQuote[serviceId];
            updateQuoteSummary();
        }
        function updateQuoteSummary() {
            const quoteItemsEl = document.getElementById('quote-items');
            const quoteTotalEl = document.getElementById('quote-total');
            const whatsappBtn = document.getElementById('whatsapp-quote-btn');
            quoteItemsEl.innerHTML = '';
            let total = 0;
            const hasItems = Object.keys(currentQuote).length > 0;
            if (!hasItems) {
                quoteItemsEl.innerHTML = '<li class="empty-quote">Añade servicios para cotizar.</li>';
            } else {
                for (const serviceId in currentQuote) {
                    const item = currentQuote[serviceId];
                    total += item.price;
                    const li = document.createElement('li');
                    li.innerHTML = `<span>${item.quantity.toLocaleString('es-PE')} ${item.name}</span><span>S/ ${item.price.toFixed(2)}</span><button class="remove-quote-item" data-service-id="${serviceId}">×</button>`;
                    quoteItemsEl.appendChild(li);
                }
            }
            quoteTotalEl.innerHTML = `<span class="quote-total-label">Total</span> S/ ${total.toFixed(2)}`;
            whatsappBtn.toggleAttribute('disabled', !hasItems);
            document.querySelectorAll('.remove-quote-item').forEach(b => b.addEventListener('click', () => removeServiceFromQuote(b.dataset.serviceId)));
        }
        function sendQuoteToWhatsApp(e) {
            e.preventDefault();
            let message = "Hola VIRALIZA, quisiera cotizar los siguientes servicios:\n\n";
            let total = 0;
            for (const serviceId in currentQuote) {
                const item = currentQuote[serviceId];
                message += `- *${item.quantity.toLocaleString('es-PE')} ${item.name}* (S/ ${item.price.toFixed(2)})\n`;
                total += item.price;
            }
            message += `\n*Total Cotizado: S/ ${total.toFixed(2)}*`;
            const whatsappUrl = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        // --- LÓGICA DE PÁGINAS (TIKTOK) Y NAVEGACIÓN GENERAL ---
        const mainContent = document.getElementById('main-content');
        const formPage = document.getElementById('form-page');
        const successPage = document.getElementById('success-page');
        const canceledPage = document.getElementById('canceled-page');
        const allPages = [mainContent, formPage, successPage, canceledPage];
        const confirmationModal = document.getElementById('confirmation-modal');
        const selectPlanButtons = document.querySelectorAll('.select-plan-button');
        const prePaymentForm = document.getElementById('pre-payment-form');
        const verifyUsernameBtn = document.getElementById('verify-username-btn');
        const editDetailsBtn = document.getElementById('edit-details-btn');
        const backToHomeButtons = document.querySelectorAll('.back-to-home-btn');
        const backToMainBtn = document.querySelector('.back-to-main');
        const navLinks = document.querySelectorAll('.nav-link');
        const homeLinks = document.querySelectorAll('.nav-link-home');

        let currentPlan = null;

        function showPage(pageId) {
            allPages.forEach(page => { if(page) page.style.display = 'none'; });
            const pageToShow = document.getElementById(pageId);
            if (pageToShow) {
                pageToShow.style.display = pageToShow.classList.contains('page-container') ? 'flex' : 'block';
            }
            window.scrollTo(0, 0);
        }

        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                const targetId = this.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                
                if (mainContent.style.display === 'none') {
                    showPage('main-content');
                    setTimeout(() => {
                        const elementToScroll = document.getElementById(targetId);
                        if (elementToScroll) elementToScroll.scrollIntoView({ behavior: 'smooth' });
                    }, 100);
                } else {
                    if (targetElement) {
                        e.preventDefault();
                        const headerOffset = document.querySelector('.header')?.offsetHeight || 80;
                        const elementPosition = targetElement.getBoundingClientRect().top;
                        const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
                        window.scrollTo({ top: offsetPosition, behavior: 'smooth' });
                    }
                }
            });
        });
        
        homeLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                showPage('main-content');
            });
        });

        if (selectPlanButtons) {
            selectPlanButtons.forEach(button => {
                button.addEventListener('click', function() {
                    currentPlan = this.closest('.plan-card').dataset.plan; // 'basico' o 'pro'
                    const planName = (currentPlan === 'basico') ? "Plan Básico" : "Plan Live Pro";
                    
                    document.getElementById('form-title').textContent = `Configurar ${planName}`;
                    const lastPostUrlGroup = document.getElementById('last-post-url-group');
                    lastPostUrlGroup.style.display = (currentPlan === 'pro') ? 'block' : 'none';
                    if(document.getElementById('last-post-url')) document.getElementById('last-post-url').required = (currentPlan === 'pro');
                    
                    document.getElementById('form-submit-button').textContent = `Continuar a la Confirmación`;
                    document.getElementById('hidden-plan-input').value = planName;
                    prePaymentForm.reset();
                    document.getElementById('username-status').textContent = '';
                    if(document.getElementById('profile-pic-preview')) document.getElementById('profile-pic-preview').style.display = 'none';
                    showPage('form-page');
                });
            });
        }
        
        if(backToMainBtn) backToMainBtn.addEventListener('click', () => showPage('main-content'));
        
        backToHomeButtons.forEach(button => {
            button.addEventListener('click', () => {
                history.pushState("", document.title, window.location.pathname + window.location.search);
                showPage('main-content');
            });
        });

        if (verifyUsernameBtn) {
            verifyUsernameBtn.addEventListener('click', function() {
                const usernameInput = document.getElementById('tiktok-username');
                const username = usernameInput.value;
                const statusEl = document.getElementById('username-status');
                if (!username || !username.startsWith('@') || username.length < 3) {
                    statusEl.textContent = 'Formato inválido. Debe empezar con @ y tener al menos 2 caracteres.';
                    statusEl.className = 'error';
                    return;
                }
                statusEl.textContent = 'Verificando...';
                statusEl.className = 'loading';
                setTimeout(() => {
                    statusEl.textContent = `¡Buen nombre! ${username} parece estar disponible.`;
                    statusEl.className = 'success';
                }, 1500);
            });
        }

        const profilePicInput = document.getElementById('profile-pic');
        if (profilePicInput) {
            profilePicInput.addEventListener('change', function(event) {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = e => {
                        document.getElementById('profile-pic-preview').src = e.target.result;
                        document.getElementById('profile-pic-preview').style.display = 'block';
                    };
                    reader.readAsDataURL(file);
                }
            });
        }

        async function uploadImageToCloudinary(file) {
            if (!CLOUDINARY_CLOUD_NAME || !CLOUDINARY_UPLOAD_PRESET) {
                alert("Error de configuración: Faltan datos de Cloudinary.");
                return null;
            }
            const formData = new FormData();
            formData.append('file', file);
            formData.append('upload_preset', CLOUDINARY_UPLOAD_PRESET);
            const url = `https://api.cloudinary.com/v1_1/${CLOUDINARY_CLOUD_NAME}/image/upload`;
            try {
                const response = await fetch(url, { method: 'POST', body: formData });
                const data = await response.json();
                if (!response.ok) throw new Error(data.error.message);
                return data.secure_url;
            } catch (error) {
                console.error('Error al subir imagen:', error);
                alert(`Hubo un error al subir la foto: ${error.message}.`);
                return null;
            }
        }

        if (prePaymentForm) {
            prePaymentForm.addEventListener('submit', async function(event) {
                event.preventDefault();
                const usernameStatus = document.getElementById('username-status');
                if (!usernameStatus.textContent || !usernameStatus.classList.contains('success')) {
                    alert('Por favor, verifica un nombre de usuario disponible para continuar.');
                    return;
                }
                const submitButton = this.querySelector('button[type="submit"]');
                submitButton.disabled = true;
                submitButton.classList.add('button-loading');

                const imageFile = profilePicInput.files[0];
                let imageUrl = '';
                if (imageFile) {
                    imageUrl = await uploadImageToCloudinary(imageFile);
                    if (!imageUrl) {
                        submitButton.disabled = false;
                        submitButton.classList.remove('button-loading');
                        return;
                    }
                }
                document.getElementById('profile-pic-url').value = imageUrl;
                
                const form = event.target;
                const formData = new FormData(form);
                formData.delete('profile_pic_file');
                try {
                    const response = await fetch(form.action, { method: 'POST', body: formData, headers: { 'Accept': 'application/json' } });
                    if (response.ok) {
                        const data = Object.fromEntries(formData.entries());
                        showConfirmationModal(data);
                    } else {
                        alert('Hubo un error al enviar tus datos.');
                    }
                } catch (error) {
                    console.error('Error de red:', error);
                } finally {
                    submitButton.disabled = false;
                    submitButton.classList.remove('button-loading');
                }
            });
        }

        // FUNCIÓN DEL MODAL MODIFICADA
        function showConfirmationModal(data) {
            const selectedCountryCode = data.country;
            const details = paymentDetails[currentPlan]?.[selectedCountryCode];

            if (!details) {
                alert("Error: No se encontraron detalles de pago para el país seleccionado.");
                return;
            }
            
            // Llenar datos del resumen
            document.getElementById('modal-summary-plan').textContent = (currentPlan === 'basico' ? 'Plan Básico' : 'Plan Live Pro');
            document.getElementById('modal-summary-price').textContent = `${details.amount} ${details.currency}`;
            document.getElementById('modal-summary-country').textContent = countryNames[selectedCountryCode] || selectedCountryCode;
            document.getElementById('modal-summary-email').textContent = data.email;
            document.getElementById('modal-summary-phone').textContent = data.phone;
            document.getElementById('modal-summary-username').textContent = data.username;
            
            const postUrlContainer = document.getElementById('modal-summary-post-url-container');
            if (currentPlan === 'pro' && data.last_post_url) {
                document.getElementById('modal-summary-post-url').textContent = data.last_post_url;
                postUrlContainer.style.display = 'block';
            } else { 
                postUrlContainer.style.display = 'none'; 
            }
            
            // Generar el botón de pago dinámico
            const paymentContainer = document.getElementById('dlocal-payment-container');
            paymentContainer.innerHTML = ''; // Limpiar el contenedor
            
            const divId = 'dlocal-btn-' + new Date().getTime();
            const btnDiv = document.createElement('div');
            btnDiv.id = divId;
            paymentContainer.appendChild(btnDiv);

            try {
                new DlocalGo(DLOCAL_GO_KEY).createCheckout(divId, details);
            } catch (error) {
                console.error("DlocalGo no está disponible o falló.", error);
                paymentContainer.innerHTML = '<p style="color:red;">Error al cargar el botón de pago.</p>';
            }

            // Mostrar el modal
            confirmationModal.style.display = 'flex';
        }

        if(editDetailsBtn) editDetailsBtn.addEventListener('click', () => { confirmationModal.style.display = 'none'; });
        
        function handleRedirect() {
            const urlParams = new URLSearchParams(window.location.search);
            const status = urlParams.get('status');
            if (status === 'approved') {
                showPage('success-page');
            } else if (status === 'failure' || status === 'pending') {
                showPage('canceled-page');
            }
            history.replaceState(null, '', window.location.pathname);
        }
        
        window.addEventListener('load', () => {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.has('status')) {
                 handleRedirect();
            } else {
                 showPage('main-content');
            }
            initCalculator();
        });
    });
    </script>
</body>
</html>